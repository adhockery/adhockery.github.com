<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ad-Hockery - Resources plugin and modular web components for Grails apps</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/stylesheets/adhockery.css">
    <link rel="stylesheet" href="/stylesheets/prism.css">
    <script src="/javascripts/modernizr.custom.js"></script>
    <script src="//use.edgefonts.net/ultra;league-gothic.js"></script>
  </head>
  <body>

    <header id="site-header">
      <h1 class="logo"><a href="/">Ad-Hockery</a></h1>
      <dl class="strapline">
        <dt>ad-hockery: <em>/ad·hok'@r·ee/</em>, n.</dt>
        <dd>Gratuitous assumptions... which lead to the appearance of semi-intelligent behavior but are in fact entirely arbitrary. <cite><a href="http://www.retrologic.com/jargon/A/ad-hockery.html">Jargon File</a></cite>
      </dl>
    </header>

    <main>
        <article>
    <header>
      <time datetime="2011-05-21T21:59:00">May 21 2011</time>
      <h1>Resources plugin and modular web components for Grails apps</h1>
    </header>
    <div class="paragraph">
<p>I recently gave a talk on <a href="http://www.eu2011.gr8conf.org/talk/progressive-uis"><em>Building progressive UIs with Grails</em></a> at <a href="http://www.eu2011.gr8conf.org/">gr8conf</a> in Copenhagen and was really pleased with the feedback &amp; comments I received afterwards. There was a question asked at the end that I felt in retrospect I could have answered better, though. I had mentioned that the Grails <a href="http://grails.org/doc/latest/guide/6.%20The%20Web%20Layer.html#6.7%20Ajax">AJAX tags</a> were something that should be avoided as they write script blocks directly into the page and event handlers directly onto HTML elements. I was pitching an approach based on a clean separation of clean semantic markup and script enhancements and inline script violates that separation.</p>
</div>

<div class="paragraph">
<p>I was asked if there might be any kind of tags that could be developed that provided a more appropriate replacement and answered that since modern JavaScript frameworks such as <a href="http://api.jquery.com/category/ajax/">jQuery</a> make decorating elements with AJAX functionality so easy that I didn&#8217;t think there was much point.</p>
</div>
<div class="paragraph">
<p>I wouldn&#8217;t want anyone to understand me to mean that creating taglibs and GSP templates for modular components of your pages is a bad thing. I&#8217;d just advocate keeping the script out of them. Custom tags that write out markup or delegate to templates can be really useful for building complex reusable modules. Pairing those with external JavaScript files that enhance the generated markup would be very effective.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using the <a href="http://grails.org/plugin/resources">resources plugin</a> (and really… you should be) then there&#8217;s a really neat way to tie the taglib or template to the JavaScript file as well. I did briefly mention this in my talk but it&#8217;s worth expanding on here as it&#8217;s a technique with a lot of potential.</p>
</div>
<div class="paragraph">
<p>The resources plugin&#8217;s <code>r:use</code> tag doesn&#8217;t write out anything directly to the page but rather adds a resource module to a list that will get written out at the appropriate place in the page when the <code>r:layoutResources</code> tag is used. This means modular components throughout the page can declare a dependency on JavaScript and CSS resources by simply calling <code>r:use</code>. In a complex app this can be a real boon as it might not be obvious from the top level GSP exactly which modules are going to get rendered. Also if a module is later added to or removed from a page you don&#8217;t need to worry about fiddling around with resource declarations in the top level GSP. Taglibs or templates become real drop in components whilst maintaining a nice clean separation of markup and script. Even better, if you use the same resource dependency multiple times the plugin ensures the resources are actually only linked once.</p>
</div>
<div class="paragraph">
<p>Since <code>r:layoutResources</code> is typically used in a SiteMesh layout the resources your module depends on can even be ones that need to appear in the <code>head</code> of the document. The SiteMesh is rendered after the GSP it decorates so any <code>r:use</code> calls will already have been made.</p>
</div>
    <footer>
      <ul class="tag-list">
          <li><a href="/tags/progressive-enhancement/">progressive enhancement</a></li>
          <li><a href="/tags/resources/">resources</a></li>
          <li><a href="/tags/css/">css</a></li>
      </ul>
    </footer>
  </article>

    </main>

    <footer id="site-footer">
      <nav>
        <a href="/">Home</a>
        <a href="/about">About</a>
        <a href="/archive">Archive</a>
      </nav>
    </footer>

    <script src="/javascripts/adhockery.js"></script>
  </body>
</html>

<div id="disqus_thread"></div>
            <script type="text/javascript">
            //<![CDATA[
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//adhockery.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            //]]>
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </script>
